<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             694c72e43eced             |
    |_______________________________________|
*/
 namespace Pmpr\Module\Rating; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Common\Foundation\REST\AbstractCoreController; use Pmpr\Module\Rating\Model\Feedback; use Pmpr\Module\Rating\Model\Rate; use Pmpr\Module\Rating\Traits\CommonTrait; use WP_Error; use WP_REST_Request; class Controller extends AbstractCoreController { use CommonTrait; public function qiccuiwooiquycsg() { $this->prefix = 'rating'; } public function qyioasyaygeaouwq() { $this->ueegsaaqskeuyiaa('get-html', [$this, 'ekmgiqyaegkwcmae'])->ueegsaaqskeuyiaa('submit/rate', [$this, 'ocmicsouockoyaww'], Constants::rkcekuukkmyekksa)->ueegsaaqskeuyiaa('submit/feedback', [$this, 'gayogmswqgoiscsa'], Constants::rkcekuukkmyekksa); } public function ekmgiqyaegkwcmae(WP_REST_Request $aqmwamyiwgeeymqa) { if (!$this->qaieyaksuucscmue()) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Sorry can not do this right now.', PR__MDL__RATING)); } $sqeykgyoooqysmca = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::squoamkioomemiyi); $moqewomugocaueis = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::eggygikowgywcayq, 0); if (empty($sqeykgyoooqysmca) || empty($moqewomugocaueis)) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->cackyykusuowuiwg(); } if (!$this->uiqcwsowwswommka($moqewomugocaueis, $sqeykgyoooqysmca)) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('You are not allowed to do thin.', PR__MDL__RATING)); } return $this->qasywwyamoesisyi('ok', [Constants::gsqoooskigukokks => Frontend::symcgieuakksimmu()->wgqqgewcmcemoewo($moqewomugocaueis, $sqeykgyoooqysmca, true)]); } public function ocmicsouockoyaww(WP_REST_Request $aqmwamyiwgeeymqa) { if (!$this->qaieyaksuucscmue()) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Sorry can not do this right now.', PR__MDL__RATING)); } $moqewomugocaueis = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::eggygikowgywcayq); $eqgoocgaqwqcimie = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::ciyoccqkiamemcmm); $sqeykgyoooqysmca = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::squoamkioomemiyi, Constants::uouymeyqasaeckso); if (empty($eqgoocgaqwqcimie) || empty($moqewomugocaueis) || !is_numeric($moqewomugocaueis) || $eqgoocgaqwqcimie < 0 || $eqgoocgaqwqcimie > 5 || !in_array($sqeykgyoooqysmca, [Constants::uouymeyqasaeckso, Constants::gmmygyiecgmggaam])) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->cackyykusuowuiwg(); } $yoiguusocukqeayg = $this->caokeucsksukesyo()->issssuygyewuaswa(); $icwicymcioeyeyek = []; $qioqusssqgowmcoq = $yoiguusocukqeayg->ecqiugqwquemomqk(Constants::gouqcwikiiygyasc); if (!empty($qioqusssqgowmcoq)) { $icwicymcioeyeyek[Constants::cmcqgcgqyckmiggk] = $qioqusssqgowmcoq; } else { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Your identity can not be determined.', PR__MDL__RATING)); } $icwicymcioeyeyek[Constants::squoamkioomemiyi] = $sqeykgyoooqysmca; $icwicymcioeyeyek[Constants::ciyoccqkiamemcmm] = $eqgoocgaqwqcimie; $icwicymcioeyeyek[Constants::eggygikowgywcayq] = $moqewomugocaueis; $mcieuoqmagekmouk = Rate::symcgieuakksimmu(); if ($wiwomgcsgmawegaw = $mcieuoqmagekmouk->gmaiukcusaqugaii($moqewomugocaueis, $sqeykgyoooqysmca)) { $icwicymcioeyeyek[$mcieuoqmagekmouk->kumuygiiqswoyasy()] = $mcieuoqmagekmouk->mwyqswsaeeewsosm($wiwomgcsgmawegaw); } $sogksuscggsicmac = $mcieuoqmagekmouk->gssiscqyqsacmeca()->gsegsiocqmsoayii($icwicymcioeyeyek); if (is_wp_error($sogksuscggsicmac)) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->ueiegogoeyqoiewa(__('Something wrong on save your rate.', PR__MDL__RATING)); } return $this->qasywwyamoesisyi($this->weysguygiseoukqw(Setting::aiyeuymiomaukaaa, ''), [Constants::gouqcwikiiygyasc => $sogksuscggsicmac[Constants::gouqcwikiiygyasc]]); } public function gayogmswqgoiscsa(WP_REST_Request $aqmwamyiwgeeymqa) { if (!$this->qaieyaksuucscmue()) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Sorry can not do this right now.', PR__MDL__RATING)); } $ycismgkumgmyucwi = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Feedback::omokyaqqqemegkkm); $cmwygeyygwqaemaq = trim((string) $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::TEXT, '')); if (empty($cmwygeyygwqaemaq) || empty($ycismgkumgmyucwi) || !is_numeric($ycismgkumgmyucwi)) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->cackyykusuowuiwg(); } if (strlen($cmwygeyygwqaemaq) > 500) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('your message is too large to save.', PR__MDL__RATING), 404); } if (!$this->weysguygiseoukqw(Setting::qyusiikocoewiyks)) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Feedback functionality is not enable.', PR__MDL__RATING)); } $mcieuoqmagekmouk = Rate::symcgieuakksimmu(); $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $qioqusssqgowmcoq = $this->caokeucsksukesyo()->issssuygyewuaswa()->ecqiugqwquemomqk(Constants::gouqcwikiiygyasc); if (!$mcieuoqmagekmouk->iekyeyicoyyawomk()->exists([$eqwoegegiamegqsm->megqywqeuquawkim($mcieuoqmagekmouk->kumuygiiqswoyasy(), $ycismgkumgmyucwi), $eqwoegegiamegqsm->megqywqeuquawkim(Constants::cmcqgcgqyckmiggk, $qioqusssqgowmcoq)])) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('You can not submit a feedback on this rate.', PR__MDL__RATING), 403); } $weokemwsqkosacea = Feedback::symcgieuakksimmu(); if ($kgcimgkyoweyimck = $weokemwsqkosacea->iekyeyicoyyawomk()->akkkoiiymmamsauc($ycismgkumgmyucwi, $weokemwsqkosacea::omokyaqqqemegkkm)) { $icwicymcioeyeyek[$weokemwsqkosacea->kumuygiiqswoyasy()] = $weokemwsqkosacea->mwyqswsaeeewsosm($kgcimgkyoweyimck); } else { $icwicymcioeyeyek[Feedback::omokyaqqqemegkkm] = $ycismgkumgmyucwi; } $icwicymcioeyeyek[Constants::TEXT] = $cmwygeyygwqaemaq; $sogksuscggsicmac = $weokemwsqkosacea->gssiscqyqsacmeca()->gsegsiocqmsoayii($icwicymcioeyeyek); if (is_wp_error($sogksuscggsicmac)) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Something wrong on save your message.', PR__MDL__RATING)); } return $this->qasywwyamoesisyi($this->weysguygiseoukqw(Setting::mauaqacuqauecioa, '')); } public function qaieyaksuucscmue() : bool { return !empty($this->caokeucsksukesyo()->issssuygyewuaswa()->ecqiugqwquemomqk(Constants::gouqcwikiiygyasc)); } }
